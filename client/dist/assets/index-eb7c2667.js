(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const c=$("#results"),p=$("#welcome"),w=$("#myButton");$("#myButton1");$(".user_task_btn");const b=$("#new_email"),m=$("#userInput"),k=$("#userInputSignin");$(".task-card");const d=$("#not_complete"),f=$("#complete"),h=$("#NewTaskSearch");c.on("click",".delete_task",v);function T(){const s=m.val();fetch("/newuser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:s})}).then(e=>{console.log(e.status),e.status===400&&alert("Email Exists, Please Sign In"),e.status===405&&alert("Please use a valid email"),e.status==201&&alert("Welcome! New User Created")}).catch(e=>{e.message==="No response"&&alert("email exists"),console.error("Error! ",e)})}m.on("keypress",s=>{s.key==="Enter"&&(s.preventDefault(),T())});b.on("click",()=>{T()});function y(){const s=k.val();fetch(`/users/${s}`).then(e=>e.json()).then(e=>{if(console.log(e),e==="USER NOT FOUND"||e===0||e===void 0)alert("USER NOT FOUND!!!");else{p.empty();let n=e.user_email;const r=$("<h2></h2>").attr("class","welcome-card").text(` Welcome, ${n} `),t=$("<button>CHECK YOUR TASKS</button>").attr("id",`${e.user_id}`).attr("class","user_task_btn");c.find(".user_task_btn").remove(),p.append(r),c.append(t)}}).catch(e=>{console.error("error",e)})}w.on("click",()=>{y()});k.on("keypress",s=>{s.key==="Enter"&&(s.preventDefault(),y())});c.on("click",".user_task_btn",()=>{const s=$(".user_task_btn").attr("id");fetch(`/tasks/${s}`).then(e=>e.json()).then(e=>{c.empty();for(let o of e){let a=o.todo;const i=$("<div></div>").attr("class","task-card");if(o.completed===!1){i.text(`${a} ⭕ `);const u=$("<button>x</i></button>").attr("data-task-id",o.task_id).attr("class","delete_task"),l=$("<div></div>").attr("class","task-container");i.append(u),l.append(i),d.append(l),c.append(d)}else{i.text(`${a} ✅ `);const u=$("<button>x</i></button>").attr("data-task-id",o.task_id).attr("class","delete_task"),l=$("<div></div>").attr("class","task-container");i.append(u),l.append(i),f.append(l),c.append(f)}}const n=document.createElement("div");n.className="TodoInputDiv";const r=document.createElement("form");r.className="newTodo";const t=document.createElement("input");t.name="text",t.set=t.text,t.setAttribute("placeholder","Type New Task"),t.setAttribute("class","newTodoText"),t.setAttribute("id",`${s}`),r.append(t),n.append(r),h.append(n)}).catch(e=>{console.error("Error:",e)})});function g(){const s=$(".newTodoText").attr("id"),e=$(".newTodoText").val();console.log(e),fetch(`/newtask/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newTaskInput:e})}).then(n=>n.json()).then(n=>{let r=n.todo;console.log(r);const t=$("<div></div>").attr("class","task-card");t.text(`${r} ⭕ `);const o=$("<button>x</i></button>").attr("data-task-id",`${n.task_id}`).attr("class","delete_task"),a=$("<div></div>").attr("class","task-container");t.append(o),a.append(t),d.append(a),c.append(d)}).catch(n=>{console.error("error",n)})}h.on("keypress",".newTodoText",s=>{const e=$(".newTodoText");s.key==="Enter"&&(s.preventDefault(),e.val()===""?alert("Please enter a task"):g(),e.val(""))});console.log("hello");function v(s){const e=$(s.target).data("task-id");confirm("Are you sure you want to delete this task?")&&fetch(`/tasks/${e}`,{method:"DELETE"}).then(n=>n.json()).then(n=>{alert("Task deleted!"),s.target.closest(".task-container").remove()}).catch(n=>{console.error("Error:",n)})}
